<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="design-patterns-state.css"/>
<link href='http://fonts.googleapis.com/css?family=Rosario' rel='stylesheet'>

<meta charset="utf-8">
<title>The State Pattern by Sadie Bartholomew</title>

<header>
   &nbsp; &nbsp; Design Patterns &rarrhk; <b>The State Pattern</b>
</header>

</head>

<body>
<!-- one slide per section -->
<section>
    <h1>The State Pattern</h1>
    <h2>Met Office Design Patterns Course, 2017/18</h2>
    <footer>Sadie Bartholomew (<i>sadielbartholomew</i>) &nbsp; &bull; &nbsp; October 2018</footer>
</section>

<section>
    <h1>Material</h1>
    <h2>Slide content quoted (as referenced) or adapted from:</h2><br>
        <ol>
          <li><mark>Course book</mark>: <i>Head First Design Patterns</i> by
Freeman <i>et al.</i>
          <li><mark>Original book</mark>: <i>Design Patterns: Elements of Reusable Object-Oriented Software</i> by Gamma <i>et al.</i> aka the "Gang of Four"
        </ol>
    <h2>Alongside these slides we will examine:</h2><br>
        <ol start="3">
          <li>Met Office <i>Design Patterns
          <mark>Community </mark></i><mark> SharePoint pages</mark>
        </ol>
</section>

<section>
    <h3>Session overview</h3>
    <ul>
      <li class="next"> <mark>Introduction</mark>: <i>Gumball Machine</i> book example
      <li class="next"> Review of <mark>the State Pattern</mark>:
        <ul>
          <li class="next"> Associated terminology
          <li class="next"> Definition & <i>UML</i> (Class) diagram
          <li class="next"> Potential use cases by context
          <li class="next"> Anti-patterns
        </ul>
      <li class="next"> Placement into the <mark>wider context</mark>:
        <ul>
          <li class="next"> Relation to Strategy Pattern
          <li class="next"> Underlying Object-Oriented Design Principles
        </ul>
    <li class="next"> Look at <mark>coded examples</mark> in Python, Java & Fortran
    <li class="next"> Think conceptually about other examples</mark>

    </ul>

    <div role="note">Note: also 10 minutes to discuss next session.</div>
</section>

<section>
    <h3>Gumball Machine book example</h3>
    <ul>
      <li class="next"> Contrived example of a 'Gumball Machine', a machine which ejects gumballs for change
      <li class="next"> [&larr;] SharePoint Gumball Machine <i>state diagram</i>
      <li class="next"> Distinguish possible states & actions, e.g. 'Has Quarter' is a state & 'inserts quarter' is an action
      <li class="next"> Initial implementation:
        <ul>
          <li class="next"> for <i>every</i> action, use a set of conditionals over <i>every</i> possible state to outline behaviour it should prompt for each case
          <li class="next"> more states, actions &rarr; many more code lines
          <li class="next"> monolithic, inflexible; a State <b>Anti</b>pattern
        </ul>
        </ul>
</section>

<section>
  <blockquote>
  The State Pattern enables one to <i>encapsulate state-based
  behaviour & delegate behaviour to the current state</i>.
  </blockquote>
</section>

<section>
    <h3>Gumball Machine with the State Pattern</h3>
    <ul>
      <li class="next"> New 'State Pattern' based implementation:
        <ul>
          <li class="next"> <b>abstract 'State' class</b> defines a common interface (<i>all possible actions</i>) to the machine
          <li class="next"> <i>every</i> 'concrete' state has its own class which outlines its own behaviour for each such action
          <li class="next"> Gumball Machine behaves according to whatever state it delegates to (<i>current state</i>)
          <li class="next"> flexible, maintable <b>but</b> need more classes.
        </ul>
      <li class="next"> [&larr;] SharePoint Gumball Machine <i>partial UML diagram</i>
        </ul>
</section>

<section>
  <blockquote>
  The State Pattern <i>allows an object to alter its behaviour when its
  internal state changes</i> so that <i>the object will appear to change its
  class</i>.

  </blockquote>
</section>

<section>
    <h3>Key terminology</h3>
    <ul>
      <li class="next"><b>State</b>: internal configurations of the Context
      <li class="next"><b>Action</b>: use of the interface
      <li class="next"><b>State transition</b>: change current concrete state
    </ul>

    <ul>
      <li class="next"> exact choices are subjective
      <li class="next"> how to deal with <i>internal actions</i> e.g. Gumball Machine's dispense()?
      <li class="next"> compare across group for choices for e.g. self-service checkout machine password manager, task scheduler app
      <li class="next"> <i>advice</i>: choose choices to allow state diagram to map as closely to logic as possible
    </ul>
</section>



<section>
    <h3>Key Design Principles</h3>
    <ol>
      <li class="next"><b>Encapsulate what varies</b>: the states!
      <li class="next"><b>Program to interfaces, not implementations</b>: abstract State class (at least) defines interface
      <li class="next"><b>Open-closed Principle for classes</b>: RE concrete state classes
    </ol>
</section>


<section>
    <h3>The Strategy Pattern with a different intent</h3>
    <ul>
      <li class="next"> [&larr;] SharePoint <i>UML diagram</i>

      <li class="next"> State: context + discrete, well-defined state transitions
      <li class="next"> Strategy: algorithms
    </ul>
</section>


<section>
    <h3>In code...</h3>
    <ol>
      <li class="next"><b> Python
      <li class="next"><b> Java
      <li class="next"><b> Fortran 2003
    </ol>
</section>

<section>
    <h1>Any questions or discussion points?</h1>
</section>

<div id="progress-bar"></div>

<script type="text/javascript" src="design-patterns-state.js"></script>
</body>
</html>
